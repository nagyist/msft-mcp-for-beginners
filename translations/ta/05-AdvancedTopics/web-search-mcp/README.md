# பாடம்: ஒரு வலை தேடல் MCP சர்வரை உருவாக்குதல்

இந்த அத்தியாயம் வெளிப்புற APIகளுடன் ஒருங்கிணைக்க, பல்வேறு தரவுகளைக் கையாள, பிழைகளை நிர்வகிக்க மற்றும் பல கருவிகளை ஒருங்கிணைக்கக் கூடிய ஒரு உண்மையான உலக AI முகவரியை உருவாக்குவது எப்படி என்பதை விளக்குகிறது. இதில் நீங்கள் காண்பீர்கள்:

- **அங்கீகாரம் தேவைப்படும் வெளிப்புற APIகளுடன் ஒருங்கிணைவு**
- **பல்வேறு முடிவுகளிலிருந்து பல்வேறு தரவுகளை கையாளுதல்**
- **வலுவான பிழை கையாளல் மற்றும் பதிவு செய்யும் உத்திகள்**
- **ஒரே சர்வரில் பல கருவிகளை ஒருங்கிணைத்தல்**

இது முடிவடையும் போது, மேம்பட்ட AI மற்றும் LLM இயக்கப்படும் பயன்பாடுகளுக்கு அவசியமான முறைமைகள் மற்றும் சிறந்த நடைமுறைகளுடன் நீங்கள் நடைமுறை அனுபவத்தைப் பெறுவீர்கள்.

## அறிமுகம்

இந்த பாடத்தில், SerpAPI பயன்படுத்தி நேரடி வலை தரவுகளுடன் LLM திறன்களை விரிவாக்கும் ஒரு மேம்பட்ட MCP சர்வர் மற்றும் கிளையண்டை உருவாக்குவது எப்படி என்பதை நீங்கள் கற்றுக்கொள்வீர்கள். இணையத்திலிருந்து சமீபத்திய தகவல்களை அணுகக்கூடிய மாறும் AI முகவரிகளை உருவாக்க இது ஒரு முக்கிய திறனாகும்.

## கற்றல் நோக்கங்கள்

இந்த பாடம் முடிவடையும் போது, நீங்கள்:

- MCP சர்வரில் SerpAPI போன்ற வெளிப்புற APIகளை பாதுகாப்பாக ஒருங்கிணைக்க
- வலை, செய்தி, பொருட்கள் தேடல் மற்றும் கேள்வி-பதில் கருவிகளை செயல்படுத்த
- LLM பயன்பாட்டிற்காக அமைந்த தரவுகளை பகுப்பாய்வு செய்து வடிவமைக்க
- பிழைகளை கையாளவும் API விகித வரம்புகளை திறம்பட நிர்வகிக்கவும்
- தானியங்கி மற்றும் இடைமுக MCP கிளையண்டுகளை உருவாக்கி சோதிக்கவும் முடியும்.

## வலை தேடல் MCP சர்வர்

இந்த பகுதி வலை தேடல் MCP சர்வரின் கட்டமைப்பு மற்றும் அம்சங்களை அறிமுகப்படுத்துகிறது. FastMCP மற்றும் SerpAPI ஆகியவை இணைந்து LLM திறன்களை நேரடி வலை தரவுகளுடன் விரிவாக்குவது எப்படி என்பதை நீங்கள் காண்பீர்கள்.

### மேலோட்டம்

இந்த செயல்படுத்தல் MCPவின் திறனை வெளிப்புற API இயக்கப்படும் பணிகளை பாதுகாப்பாகவும் திறம்படவும் கையாளும் நான்கு கருவிகளை கொண்டுள்ளது:

- **general_search**: பரந்த வலை முடிவுகளுக்காக
- **news_search**: சமீபத்திய தலைப்புகளுக்காக
- **product_search**: மின்வணிகத் தரவுகளுக்காக
- **qna**: கேள்வி-பதில் துணுக்குகளுக்காக

### அம்சங்கள்
- **குறியீட்டு உதாரணங்கள்**: Python (மற்றும் பிற மொழிகளுக்கு எளிதில் விரிவாக்கக்கூடியது) உடன் தெளிவான குறியீட்டு விளக்கங்களுடன்

### Python

```python
# Example usage of the general_search tool
from mcp import ClientSession, StdioServerParameters
from mcp.client.stdio import stdio_client

async def run_search():
    server_params = StdioServerParameters(
        command="python",
        args=["server.py"],
    )
    async with stdio_client(server_params) as (reader, writer):
        async with ClientSession(reader, writer) as session:
            await session.initialize()
            result = await session.call_tool("general_search", arguments={"query": "open source LLMs"})
            print(result)
```

---

கிளையண்டை இயக்குவதற்கு முன், சர்வர் என்ன செய்கிறது என்பதைப் புரிந்துகொள்வது உதவியாக இருக்கும். [`server.py`](../../../../05-AdvancedTopics/web-search-mcp/server.py) கோப்பு MCP சர்வரை செயல்படுத்துகிறது, இது SerpAPIயுடன் ஒருங்கிணைந்து வலை, செய்தி, பொருட்கள் தேடல் மற்றும் கேள்வி-பதில் கருவிகளை வெளிப்படுத்துகிறது. இது வரும் கோரிக்கைகளை கையாள்கிறது, API அழைப்புகளை நிர்வகிக்கிறது, பதில்களை பகுப்பாய்வு செய்கிறது மற்றும் கிளையண்டுக்கு அமைந்த முடிவுகளை திருப்பி அனுப்புகிறது.

[`server.py`](../../../../05-AdvancedTopics/web-search-mcp/server.py)யில் முழு செயல்பாட்டையும் நீங்கள் பார்வையிடலாம்.

இங்கே சர்வர் ஒரு கருவியை வரையறுத்து பதிவு செய்யும் ஒரு சுருக்கமான உதாரணம் உள்ளது:

### Python Server

```python
# server.py (excerpt)
from mcp.server import MCPServer, Tool

async def general_search(query: str):
    # ...implementation...

server = MCPServer()
server.add_tool(Tool("general_search", general_search))

if __name__ == "__main__":
    server.run()
```

---

- **வெளிப்புற API ஒருங்கிணைவு**: API விசைகள் மற்றும் வெளிப்புற கோரிக்கைகளை பாதுகாப்பாக கையாள்வதை விளக்குகிறது
- **அமைந்த தரவுப் பகுப்பாய்வு**: API பதில்களை LLM-க்கு ஏற்ற வடிவங்களில் மாற்றுவது எப்படி என்பதை காட்டுகிறது
- **பிழை கையாளல்**: சரியான பிழை கையாளல் மற்றும் பொருத்தமான பதிவு
- **இடைமுக கிளையண்ட்**: தானியங்கி சோதனைகள் மற்றும் இடைமுக முறை ஆகியவற்றை உள்ளடக்கியது
- **சூழல் மேலாண்மை**: MCP சூழலை பதிவு மற்றும் கோரிக்கைகளை கண்காணிக்க பயன்படுத்துகிறது

## முன் தேவைகள்

தொடங்குவதற்கு முன், உங்கள் சூழல் சரியாக அமைக்கப்பட்டுள்ளதா என்பதை உறுதிப்படுத்தவும். இது அனைத்து சார்ந்தவை நிறுவப்பட்டுள்ளன மற்றும் உங்கள் API விசைகள் சரியாக உள்ளன என்பதை உறுதிப்படுத்தும்.

- Python 3.8 அல்லது அதற்கு மேல்
- SerpAPI API விசை ([SerpAPI](https://serpapi.com/) இல் பதிவு செய்யவும் - இலவச நிலை கிடைக்கிறது)

## நிறுவல்

உங்கள் சூழலை அமைக்க, கீழே உள்ள படிகளை பின்பற்றவும்:

1. uv (பரிந்துரைக்கப்படுகிறது) அல்லது pip பயன்படுத்தி சார்ந்தவற்றை நிறுவவும்:

```bash
# Using uv (recommended)
uv pip install -r requirements.txt

# Using pip
pip install -r requirements.txt
```

2. உங்கள் திட்டத்தின் மூலத்தில் `.env` கோப்பை உருவாக்கி உங்கள் SerpAPI விசையை சேர்க்கவும்:

```
SERPAPI_KEY=your_serpapi_key_here
```

## பயன்பாடு

வலை தேடல் MCP சர்வர் SerpAPIயுடன் ஒருங்கிணைந்து வலை, செய்தி, பொருட்கள் தேடல் மற்றும் கேள்வி-பதில் கருவிகளை வெளிப்படுத்தும் முக்கிய கூறாகும். இது வரும் கோரிக்கைகளை கையாள்கிறது, API அழைப்புகளை நிர்வகிக்கிறது, பதில்களை பகுப்பாய்வு செய்கிறது மற்றும் கிளையண்டுக்கு அமைந்த முடிவுகளை திருப்பி அனுப்புகிறது.

[`server.py`](../../../../05-AdvancedTopics/web-search-mcp/server.py)யில் முழு செயல்பாட்டையும் நீங்கள் பார்வையிடலாம்.

### சர்வரை இயக்குதல்

MCP சர்வரை தொடங்க, கீழே உள்ள கட்டளையை பயன்படுத்தவும்:

```bash
python server.py
```

சர்வர் stdio அடிப்படையிலான MCP சர்வராக இயங்கும், அதில் கிளையண்ட் நேரடியாக இணைக்க முடியும்.

### கிளையண்ட் முறைகள்

கிளையண்ட் (`client.py`) MCP சர்வருடன் தொடர்பு கொள்ள இரண்டு முறைகளை ஆதரிக்கிறது:

- **சாதாரண முறை**: அனைத்து கருவிகளையும் சோதித்து அவற்றின் பதில்களை சரிபார்க்க தானியங்கி சோதனைகளை இயக்குகிறது. இது சர்வரும் கருவிகளும் எதிர்பார்த்தபடி செயல்படுகிறதா என்பதை விரைவாக சரிபார்க்க உதவும்.
- **இடைமுக முறை**: ஒரு மெனு இயக்கப்படும் இடைமுகத்தைத் தொடங்குகிறது, இதில் நீங்கள் கையேடு முறையில் கருவிகளைத் தேர்ந்தெடுத்து அழைக்கலாம், தனிப்பயன் கேள்விகளை உள்ளிடலாம் மற்றும் நேரடியாக முடிவுகளைப் பார்க்கலாம்.
DEBUG முறையை இயக்க, உங்கள் `client.py` அல்லது `server.py` கோப்பின் மேற்பகுதியில் logging நிலையை DEBUG ஆக அமைக்கவும்:

# [Python](../../../../05-AdvancedTopics/web-search-mcp)

```python
# At the top of your client.py or server.py
import logging
logging.basicConfig(
    level=logging.DEBUG,  # Change from INFO to DEBUG
    format="%(asctime)s - %(name)s - %(levelname)s - %(message)s"
)
```

---

---

## அடுத்தது என்ன 

- [5.10 நேரடி ஸ்ட்ரீமிங்](../mcp-realtimestreaming/README.md)

---

**அறிவிப்பு**:  
இந்த ஆவணம் [Co-op Translator](https://github.com/Azure/co-op-translator) என்ற AI மொழிபெயர்ப்பு சேவையை பயன்படுத்தி மொழிபெயர்க்கப்பட்டுள்ளது. நாங்கள் துல்லியத்திற்காக முயற்சிக்கிறோம், ஆனால் தானியங்கி மொழிபெயர்ப்புகளில் பிழைகள் அல்லது தவறுகள் இருக்கக்கூடும் என்பதை கவனத்தில் கொள்ளவும். அதன் சொந்த மொழியில் உள்ள மூல ஆவணம் அதிகாரப்பூர்வ ஆதாரமாக கருதப்பட வேண்டும். முக்கியமான தகவல்களுக்கு, தொழில்முறை மனித மொழிபெயர்ப்பு பரிந்துரைக்கப்படுகிறது. இந்த மொழிபெயர்ப்பைப் பயன்படுத்துவதால் ஏற்படும் எந்த தவறான புரிதல்கள் அல்லது தவறான விளக்கங்களுக்கும் நாங்கள் பொறுப்பல்ல.