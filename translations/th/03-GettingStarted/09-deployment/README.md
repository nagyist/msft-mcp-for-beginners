# การปรับใช้เซิร์ฟเวอร์ MCP

การปรับใช้เซิร์ฟเวอร์ MCP ของคุณช่วยให้ผู้อื่นเข้าถึงเครื่องมือและทรัพยากรของเซิร์ฟเวอร์นอกเหนือจากสภาพแวดล้อมในเครื่องของคุณ มีหลายกลยุทธ์การปรับใช้ที่ควรพิจารณา ขึ้นอยู่กับความต้องการของคุณในด้านความสามารถในการปรับขนาด ความน่าเชื่อถือ และความง่ายในการจัดการ ด้านล่างนี้คุณจะพบคำแนะนำสำหรับการปรับใช้เซิร์ฟเวอร์ MCP ในเครื่อง ในคอนเทนเนอร์ และบนคลาวด์

## ภาพรวม

บทเรียนนี้ครอบคลุมวิธีการปรับใช้แอป MCP Server ของคุณ

## วัตถุประสงค์การเรียนรู้

เมื่อจบบทเรียนนี้ คุณจะสามารถ:

- ประเมินแนวทางการปรับใช้ต่างๆ
- ปรับใช้แอปของคุณ

## การพัฒนาและปรับใช้ในเครื่อง

หากเซิร์ฟเวอร์ของคุณออกแบบให้ใช้โดยการรันบนเครื่องของผู้ใช้ คุณสามารถปฏิบัติตามขั้นตอนต่อไปนี้:

1. **ดาวน์โหลดเซิร์ฟเวอร์** หากคุณไม่ได้เขียนเซิร์ฟเวอร์เอง ให้ดาวน์โหลดเซิร์ฟเวอร์นั้นมาก่อนที่เครื่องของคุณ
1. **เริ่มกระบวนการเซิร์ฟเวอร์**: รันแอป MCP server ของคุณ

สำหรับ SSE (ไม่จำเป็นสำหรับเซิร์ฟเวอร์ประเภท stdio)

1. **กำหนดค่าการเชื่อมต่อเครือข่าย**: ตรวจสอบให้แน่ใจว่าเซิร์ฟเวอร์เข้าถึงได้บนพอร์ตที่คาดไว้  
1. **เชื่อมต่อไคลเอนต์**: ใช้ URL การเชื่อมต่อในเครื่อง เช่น `http://localhost:3000`

## การปรับใช้บนคลาวด์

เซิร์ฟเวอร์ MCP สามารถปรับใช้บนแพลตฟอร์มคลาวด์ต่างๆ ได้:

- **ฟังก์ชันแบบไม่มีเซิร์ฟเวอร์**: ปรับใช้เซิร์ฟเวอร์ MCP ที่มีน้ำหนักเบาเป็นฟังก์ชันแบบไม่มีเซิร์ฟเวอร์
- **บริการคอนเทนเนอร์**: ใช้บริการเช่น Azure Container Apps, AWS ECS หรือ Google Cloud Run
- **Kubernetes**: ปรับใช้และจัดการเซิร์ฟเวอร์ MCP ในคลัสเตอร์ Kubernetes เพื่อความพร้อมใช้งานสูง

### ตัวอย่าง: Azure Container Apps

Azure Container Apps รองรับการปรับใช้เซิร์ฟเวอร์ MCP ซึ่งยังอยู่ระหว่างการพัฒนาและปัจจุบันรองรับเซิร์ฟเวอร์ SSE

นี่คือวิธีที่คุณสามารถดำเนินการได้:

1. โคลนรีโป:

  ```sh
  git clone https://github.com/anthonychu/azure-container-apps-mcp-sample.git
  ```

1. รันในเครื่องเพื่อลองทดสอบ:

  ```sh
  uv venv
  uv sync

  # ลินุกซ์/แมคโอเอส
  export API_KEYS=<AN_API_KEY>
  # วินโดวส์
  set API_KEYS=<AN_API_KEY>

  uv run fastapi dev main.py
  ```

1. เพื่อทดลองในเครื่อง สร้างไฟล์ *mcp.json* ในไดเรกทอรี *.vscode* และเพิ่มเนื้อหาดังนี้:

  ```json
  {
      "inputs": [
          {
              "type": "promptString",
              "id": "weather-api-key",
              "description": "Weather API Key",
              "password": true
          }
      ],
      "servers": {
          "weather-sse": {
              "type": "sse",
              "url": "http://localhost:8000/sse",
              "headers": {
                  "x-api-key": "${input:weather-api-key}"
              }
          }
      }
  }
  ```

  เมื่อเซิร์ฟเวอร์ SSE เริ่มทำงาน คุณสามารถคลิกไอคอนเล่นในไฟล์ JSON ได้ ตอนนี้คุณควรเห็นเครื่องมือบนเซิร์ฟเวอร์ถูกตรวจจับโดย GitHub Copilot ดูที่ไอคอนเครื่องมือ

1. เพื่อปรับใช้ ให้รันคำสั่งดังต่อไปนี้:

  ```sh
  az containerapp up -g <RESOURCE_GROUP_NAME> -n weather-mcp --environment mcp -l westus --env-vars API_KEYS=<AN_API_KEY> --source .
  ```

แค่นี้แหละ ปรับใช้ในเครื่อง ปรับใช้ไปยัง Azure ผ่านขั้นตอนเหล่านี้

## แหล่งข้อมูลเพิ่มเติม

- [Azure Functions + MCP](https://learn.microsoft.com/en-us/samples/azure-samples/remote-mcp-functions-dotnet/remote-mcp-functions-dotnet/)
- [บทความ Azure Container Apps](https://techcommunity.microsoft.com/blog/appsonazureblog/host-remote-mcp-servers-in-azure-container-apps/4403550)
- [รีโป Azure Container Apps MCP](https://github.com/anthonychu/azure-container-apps-mcp-sample)


## ต่อไปคือ

- ต่อไป: [หัวข้อเซิร์ฟเวอร์ขั้นสูง](../10-advanced/README.md)

---

<!-- CO-OP TRANSLATOR DISCLAIMER START -->
**ข้อจำกัดความรับผิดชอบ**:
เอกสารฉบับนี้ถูกแปลโดยใช้บริการแปลภาษาด้วย AI [Co-op Translator](https://github.com/Azure/co-op-translator) ถึงแม้เราจะพยายามให้ความถูกต้อง แต่โปรดทราบว่าการแปลอัตโนมัติอาจมีข้อผิดพลาดหรือความคลาดเคลื่อนได้ เอกสารต้นฉบับในภาษาต้นทางถือเป็นแหล่งข้อมูลที่เชื่อถือได้ สำหรับข้อมูลที่สำคัญ การแปลโดยมืออาชีพแนะนำให้ใช้ เราจะไม่รับผิดชอบต่อความเข้าใจผิดหรือการตีความผิดใดๆ ที่เกิดจากการใช้การแปลนี้
<!-- CO-OP TRANSLATOR DISCLAIMER END -->