# שיטות אבטחה מומלצות ל-MCP - עדכון פברואר 2026

> **חשוב**: מסמך זה משקף את דרישות האבטחה האחרונות של [MCP Specification 2025-11-25](https://spec.modelcontextprotocol.io/specification/2025-11-25/) ואת [שיטות האבטחה המומלצות הרשמיות של MCP](https://modelcontextprotocol.io/specification/2025-11-25/basic/security_best_practices). תמיד יש לעיין במפרט הנוכחי לקבלת ההנחיות המעודכנות ביותר.

## 🏔️ אימון אבטחה מעשי

לניסיון יישום מעשי, אנו ממליצים על **[סדנת פסגת האבטחה של MCP (שרפה)](https://azure-samples.github.io/sherpa/)** - מסע מודרך מקיף לאבטחת שרתי MCP ב-Azure. הסדנה מכסה את כל 10 הסיכונים המובילים של OWASP MCP באמצעות שיטת "פגיע → ניצול → תיקון → אימות".

כל השיטות במסמך זה תואמות את **[מדריך האבטחה של OWASP MCP Azure](https://microsoft.github.io/mcp-azure-security-guide/)** להנחיות יישום ספציפיות ל-Azure.

## שיטות אבטחה חיוניות ליישומי MCP

פרוטוקול הקשר למודל מציג אתגרים ייחודיים לאבטחה שמרחיבים מעבר לאבטחת תוכנה מסורתית. שיטות אלו מתייחסות לדרישות אבטחה בסיסיות ולאיומים ספציפיים ל-MCP הכוללים הזרקת פקודות, הרעלת כלים, חטיפת מושבים, בעיות סוכן מבולבל ופגיעויות במעבר אסימונים.

### **דרישות אבטחה חובה**

**דרישות קריטיות מפרוטוקול MCP:**

### **דרישות אבטחה חובה**

**דרישות קריטיות מפרוטוקול MCP:**

> **אסור**: שרתי MCP **אסור** לקבל כל אסימון שלא הונפק במפורש עבור שרת MCP
> 
> **חובה**: שרתי MCP שמיישמים הרשאה **חובה** לאמת את כל הבקשות הנכנסות
>  
> **אסור**: שרתי MCP **אסור** להשתמש במושבים לאימות
>
> **חובה**: שרתי פרוקסי MCP המשתמשים במזהי לקוח סטטיים **חובה** לקבל הסכמת משתמש עבור כל לקוח רשום דינמית

---

## 1. **אבטחת אסימונים ואימות**

**בקרות אימות והרשאה:**
   - **ביקורת הרשאה קפדנית**: עריכת ביקורות מקיפות על לוגיקת ההרשאה של שרת MCP כדי להבטיח שרק משתמשים ולקוחות מיועדים יוכלו לגשת למשאבים
   - **שילוב ספק זהות חיצוני**: שימוש בספקי זהות מוכרים כגון Microsoft Entra ID במקום יישום אימות מותאם אישית
   - **בדיקת קהל יעד של אסימון**: תמיד לאמת שאסימונים הונפקו במפורש עבור שרת MCP שלך - לעולם לא לקבל אסימוני מקור עליון
   - **מחזור חיים תקין לאסימונים**: יישום סיבוב אסימונים מאובטח, מדיניות תפוגה ומניעת התקפות שיחזור אסימון

**אחסון אסימונים מוגן:**
   - שימוש ב-Azure Key Vault או מחסני סודות מאובטחים דומים לכל הסודות
   - יישום הצפנה לאסימונים גם במנוחה וגם בהעברה
   - סיבוב סודות קבוע ומעקב לגילוי גישה בלתי מורשית

## 2. **ניהול מושב ואבטחת תחבורה**

**שיטות מושב מאובטחות:**
   - **זיהוי מושב קריפטוגרפי בטוח**: שימוש במזהי מושב אקראיים ולא דטרמיניסטיים שנוצרו באמצעות מחוללי מספרים אקראיים מאובטחים
   - **קישור ספציפי למשתמש**: קישור מזהי מושב לזהויות משתמש בפורמטים כמו `<user_id>:<session_id>` למניעת שימוש לרעה במושב בין משתמשים
   - **ניהול מחזור חיים של מושב**: יישום תפוגה, סיבוב וביטול תקינים להגבלת חלונות פגיעות
   - **אכיפת HTTPS/TLS**: חובה להשתמש ב-HTTPS לכל התקשורת כדי למנוע יירוט מזהי מושב

**אבטחת שכבת התחבורה:**
   - תצורת TLS 1.3 היכן שאפשר עם ניהול תעודות תקין
   - יישום נעילת תעודה לחיבורים קריטיים
   - סיבוב קבוע של תעודות ואימות תוקף

## 3. **הגנה מפני איומי AI** 🤖

**הגנה מפני הזרקת פקודות:**
   - **מגן פקודות של מיקרוסופט**: פריסת מגני פקודות AI לזיהוי וסינון מתקדם של הוראות זדוניות
   - **סינון קלט**: אימות וסינון של כל הקלטים למניעת התקפות הזרקה ובעיות סוכן מבולבל
   - **גבולות תוכן**: שימוש במערכות מפרידים וסימון נתונים להבחנה בין הוראות מהימנות לתוכן חיצוני

**מניעת הרעלת כלים:**
   - **אימות מטא-נתוני כלים**: יישום בדיקות שלמות להגדרות כלים ומעקב אחר שינויים בלתי צפויים
   - **מעקב דינמי אחר כלים**: ניטור התנהגות בזמן ריצה והקמת התרעות לתבניות ביצוע בלתי צפויות
   - **זרימות אישור**: דרישת אישור מפורש של משתמש לשינויים בכלי ולשינויים ביכולות

## 4. **בקרת גישה והרשאות**

**עיקרון ההרשאה המינימלית:**
   - הענקת שרתי MCP רק בהרשאות המינימום הדרושות לתפקוד המיועד
   - יישום בקרת גישה מבוססת תפקידים (RBAC) עם הרשאות מדויקות
   - סקירות הרשאות שגרתיות ומעקב מתמשך אחר עלייה בהרשאות

**בקרות הרשאה בזמן ריצה:**
   - הגבלת משאבים למניעת התקפות תשתית
   - שימוש בבידוד מיכלים לסביבות ביצוע כלים  
   - יישום גישה בזמן אמת לפונקציות מנהליות

## 5. **בטיחות תוכן ומעקב**

**יישום בטיחות תוכן:**
   - **שילוב Azure Content Safety**: שימוש ב-Azure Content Safety לזיהוי תוכן מזיק, ניסיונות פריצה והפרות מדיניות
   - **ניתוח התנהגות**: יישום ניטור התנהגות בזמן ריצה לזיהוי חריגות בשרת MCP ובביצוע כלים
   - **רישום מקיף**: רישום כל ניסויי האימות, קריאות לכלים ואירועי אבטחה באחסון מאובטח ובלתי ניתן לשינוי

**מעקב מתמשך:**
   - התרעה בזמן אמת על דפוסים חשודים וניסיונות גישה בלתי מורשים  
   - אינטגרציה עם מערכות SIEM לניהול מרכזי של אירועי אבטחה
   - ביקורות אבטחה סדירות ובדיקות חדירה ליישומי MCP

## 6. **אבטחת שרשרת אספקה**

**אימות רכיבים:**
   - **סריקת תלותיות**: שימוש בסריקות פגיעות אוטומטיות לכל התלותיות בתוכנה וברכיבי AI
   - **אימות מקור**: אימות מקור, רישוי ושלמות של מודלים, מקורות נתונים ושירותים חיצוניים
   - **חבילות חתומות**: שימוש בחבילות חתומות קריפטוגרפית ואימות חתימות לפני הפצה

**צינור פיתוח מאובטח:**
   - **GitHub Advanced Security**: יישום סריקות סודות, ניתוח תלותיות וניתוח סטטי ב-CodeQL
   - **אבטחת CI/CD**: אינטגרציה של אימות אבטחה לאורך כל צינורות הפריסה האוטומטיים
   - **שלמות ארטיפקטים**: יישום אימות קריפטוגרפי לארטיפקטים ולתצורות המופצות

## 7. **אבטחת OAuth ומניעת סוכן מבולבל**

**יישום OAuth 2.1:**
   - **יישום PKCE**: שימוש ב-Proof Key for Code Exchange (PKCE) בכל בקשות ההרשאה
   - **אישור מפורש**: קבלת הסכמת משתמש לכל לקוח הרשום דינמית למניעת התקפות סוכן מבולבל
   - **אימות URI הפניה**: יישום אימות קפדני של URI הפניה ומזהי לקוח

**אבטחת פרוקסי:**
   - מניעת עקיפת הרשאה דרך ניצול מזהה לקוח סטטי
   - יישום זרימות אישור תקינות לגישה ל-API צד שלישי
   - מעקב אחר גניבת קוד הרשאה וניסיונות גישה בלתי מורשית ל-API

## 8. **תגובה למקרי חירום והתאוששות**

**יכולות תגובה מהירה:**
   - **תגובה אוטומטית**: יישום מערכות אוטומטיות לסיבוב סודות ולהגבלת איומים
   - **נהלי חזרה**: יכולת לשחזר במהירות תצורות ורכיבים ידועים כטובים
   - **יכולות פורנזיות**: מעקבים מפורטים ורישום לחקירת אירועים

**תקשורת ותיאום:**
   - נהלי הסלמה ברורים לאירועי אבטחה
   - אינטגרציה עם צוותי תגובת אירועים ארגוניים
   - סימולציות תרגול סדירות לאירועי אבטחה ותרגילי שולחן

## 9. **ציות וממשל**

**ציות רגולטורי:**
   - הבטחת יישומי MCP עומדים בדרישות ענפיות (GDPR, HIPAA, SOC 2)
   - יישום סיווג נתונים ובקרות פרטיות לעיבוד נתוני AI
   - תחזוקת תיעוד מקיף לביקורת ציות

**ניהול שינויים:**
   - תהליכי סקירה פורמליים לאבטחה על כל שינויים במערכת MCP
   - בקרת גרסאות וזרימות אישור לשינויים בתצורה
   - הערכות ציות שגרתיות וניתוח פערים

## 10. **בקרות אבטחה מתקדמות**

**ארכיטקטורת אפס אמון:**
   - **לעולם לא לסמוך, תמיד לאמת**: אימות מתמשך של משתמשים, מכשירים וחיבורים
   - **מיקרו-סגמנטציה**: בקרות רשת מדויקות לבידוד רכיבי MCP בודדים
   - **גישה מותנית**: בקרות גישה מבוססות סיכון המותאמות להקשר ולהתנהגות הנוכחית

**הגנת אפליקציות בזמן ריצה:**
   - **RASP**: פריסת טכניקות הגנה עצמית לאפליקציות לזיהוי איומים בזמן אמת
   - **מעקב ביצועים של אפליקציה**: ניטור חריגות ביצועים שעשויות להעיד על התקפות
   - **מדיניות אבטחה דינאמית**: יישום מדיניות אבטחה המתאימה את עצמה בהתאם לנוף האיומים הנוכחי

## 11. **שילוב במערכת האקולוגית של מיקרוסופט**

**אבטחה מקיפה של מיקרוסופט:**
   - **Microsoft Defender for Cloud**: ניהול מצב אבטחה לענני MCP
   - **Azure Sentinel**: יכולות SIEM ו-SOAR מבוססות ענן לזיהוי איומים מתקדמים
   - **Microsoft Purview**: ממשל וציות לנתונים עבור זרימות עבודה ונתונים של AI

**ניהול זהויות וגישה:**
   - **Microsoft Entra ID**: ניהול זהויות ארגוני עם מדיניות גישה מותנית
   - **Privileged Identity Management (PIM)**: גישה בזמן אמת עם זרימות אישור לתפקידי ניהול
   - **הגנת זהויות**: גישה מותנית מבוססת סיכון ותגובה אוטומטית לאיומים

## 12. **התפתחות אבטחה מתמשכת**

**שמירה על עדכניות:**
   - **מעקב אחר מפרטים**: סקירות שגרתיות של עדכוני פרוטוקול MCP ושינויים בהנחיות האבטחה
   - **מודיעין איומים**: שילוב זרמי איומים ספציפיים ל-AI וסימני פגיעה
   - **מעורבות קהילתית**: השתתפות פעילה בקהילת אבטחת MCP ותוכניות גילוי פגיעויות

**אבטחה אדפטיבית:**
   - **אבטחת למידת מכונה**: שימוש בגילוי אנומליות מבוסס ML לזיהוי דפוסי התקפה חדשים
   - **אנליטיקה חיזויית לאבטחה**: יישום מודלים חזויים לזיהוי סיכונים מראש
   - **אוטומציה באבטחה**: עדכוני מדיניות אבטחה אוטומטיים המבוססים על מודיעין איומים ושינויים במפרט

---

## **משאבי אבטחה קריטיים**

### **תיעוד רשמי של MCP**
- [מפרט MCP (2025-11-25)](https://spec.modelcontextprotocol.io/specification/2025-11-25/)
- [שיטות אבטחה מומלצות ל-MCP](https://modelcontextprotocol.io/specification/2025-11-25/basic/security_best_practices)
- [מפרט הרשאת MCP](https://modelcontextprotocol.io/specification/2025-11-25/basic/authorization)

### **משאבי אבטחה של OWASP MCP**
- [מדריך אבטחת Azure MCP של OWASP](https://microsoft.github.io/mcp-azure-security-guide/) - רשימת סיכוני OWASP MCP Top 10 עם יישום עבור Azure
- [OWASP MCP Top 10](https://owasp.org/www-project-mcp-top-10/) - סיכוני אבטחה רשמיים של OWASP MCP
- [סדנת פסגת אבטחת MCP (שרפה)](https://azure-samples.github.io/sherpa/) - אימון אבטחה מעשי ל-MCP ב-Azure

### **פתרונות אבטחה של מיקרוסופט**
- [Microsoft Prompt Shields](https://learn.microsoft.com/azure/ai-services/content-safety/concepts/jailbreak-detection)
- [Azure Content Safety](https://learn.microsoft.com/azure/ai-services/content-safety/)
- [אבטחת Microsoft Entra ID](https://learn.microsoft.com/entra/identity-platform/secure-least-privileged-access)
- [GitHub Advanced Security](https://github.com/security/advanced-security)

### **תקני אבטחה**
- [שיטות אבטחה מומלצות ל-OAuth 2.0 (RFC 9700)](https://datatracker.ietf.org/doc/html/rfc9700)
- [OWASP Top 10 עבור מודלים גדולים לשפה](https://genai.owasp.org/)
- [מסגרת ניהול סיכוני AI של NIST](https://www.nist.gov/itl/ai-risk-management-framework)

### **מדריכי יישום**
- [שער אימות MCP לניהול API של Azure](https://techcommunity.microsoft.com/blog/integrationsonazureblog/azure-api-management-your-auth-gateway-for-mcp-servers/4402690)
- [Microsoft Entra ID עם שרתי MCP](https://den.dev/blog/mcp-server-auth-entra-id-session/)

---

> **הודעת אבטחה**: שיטות האבטחה של MCP מתפתחות במהירות. תמיד אמת מול [מפרט MCP](https://spec.modelcontextprotocol.io/) הנוכחי ו-[תיעוד האבטחה הרשמי](https://modelcontextprotocol.io/specification/2025-11-25/basic/security_best_practices) לפני היישום.

## מה הלאה

- קריאה: [בקרות אבטחה ל-MCP 2025](./mcp-security-controls-2025.md)
- חזרה אל: [סקירת מודול אבטחה](./README.md)
- המשך אל: [מודול 3: התחלת עבודה](../03-GettingStarted/README.md)

---

<!-- CO-OP TRANSLATOR DISCLAIMER START -->
**כתב ויתור**:  
מסמך זה תורגם באמצעות שירות תרגום מבוסס בינה מלאכותית [Co-op Translator](https://github.com/Azure/co-op-translator). למרות שאנו שואפים לדיוק, יש לקחת בחשבון שתרגומים אוטומטיים עשויים לכלול שגיאות או אי-דיוקים. המסמך המקורי בשפה שלו מהווה את המקור הסמכותי. למידע קריטי מומלץ להיעזר בתרגום מקצועי אנושי. אנו לא אחראים לכל אי הבנות או פרשנויות שגויות הנובעות משימוש בתרגום זה.
<!-- CO-OP TRANSLATOR DISCLAIMER END -->