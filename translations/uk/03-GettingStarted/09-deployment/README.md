# Розгортання MCP серверів

Розгортання вашого MCP сервера дозволяє іншим отримувати доступ до його інструментів і ресурсів поза межами вашого локального середовища. Існує кілька стратегій розгортання, які слід враховувати залежно від ваших вимог до масштабованості, надійності та простоти керування. Нижче ви знайдете рекомендації щодо розгортання MCP серверів локально, у контейнерах і в хмарі.

## Огляд

Цей урок охоплює, як розгорнути ваш додаток MCP Server.

## Цілі навчання

Після завершення цього уроку ви зможете:

- Оцінювати різні підходи до розгортання.
- Розгортати свій додаток.

## Локальна розробка та розгортання

Якщо ваш сервер призначений для використання на комп’ютерах користувачів, ви можете виконати такі кроки:

1. **Завантажте сервер**. Якщо ви не писали сервер, спочатку завантажте його на свій комп’ютер.  
1. **Запустіть серверний процес**: Запустіть ваш MCP серверний додаток.

Для SSE (не потрібно для сервера типу stdio)

1. **Налаштуйте мережу**: Переконайтеся, що сервер доступний на очікуваному порту  
1. **Підключіть клієнтів**: Використовуйте локальні URL, як-от `http://localhost:3000`

## Хмарне розгортання

MCP сервери можна розгорнути на різних хмарних платформах:

- **Безсерверні функції**: Розгортайте легкі MCP сервери як безсерверні функції
- **Сервіси контейнерів**: Використовуйте сервіси на кшталт Azure Container Apps, AWS ECS або Google Cloud Run
- **Kubernetes**: Розгортайте та керуйте MCP серверами в кластерах Kubernetes для високої доступності

### Приклад: Azure Container Apps

Azure Container Apps підтримують розгортання MCP серверів. Це досі перебуває у стадії розробки і наразі підтримує сервери SSE.

Ось як це можна зробити:

1. Клонуйте репозиторій:

  ```sh
  git clone https://github.com/anthonychu/azure-container-apps-mcp-sample.git
  ```

1. Запустіть його локально для тестування:

  ```sh
  uv venv
  uv sync

  # linux/macOS
  export API_KEYS=<AN_API_KEY>
  # windows
  set API_KEYS=<AN_API_KEY>

  uv run fastapi dev main.py
  ```

1. Щоб спробувати локально, створіть файл *mcp.json* у директорії *.vscode* і додайте такий вміст:

  ```json
  {
      "inputs": [
          {
              "type": "promptString",
              "id": "weather-api-key",
              "description": "Weather API Key",
              "password": true
          }
      ],
      "servers": {
          "weather-sse": {
              "type": "sse",
              "url": "http://localhost:8000/sse",
              "headers": {
                  "x-api-key": "${input:weather-api-key}"
              }
          }
      }
  }
  ```

  Після запуску SSE сервера ви можете натиснути іконку запуску в JSON файлі, і тепер інструменти на сервері мають бути підхоплені GitHub Copilot, дивіться іконку Інструментів.

1. Щоб розгорнути, виконайте таку команду:

  ```sh
  az containerapp up -g <RESOURCE_GROUP_NAME> -n weather-mcp --environment mcp -l westus --env-vars API_KEYS=<AN_API_KEY> --source .
  ```

Ось і все, розгорніть локально, розгорніть в Azure за цими кроками.

## Додаткові ресурси

- [Azure Functions + MCP](https://learn.microsoft.com/en-us/samples/azure-samples/remote-mcp-functions-dotnet/remote-mcp-functions-dotnet/)
- [Стаття про Azure Container Apps](https://techcommunity.microsoft.com/blog/appsonazureblog/host-remote-mcp-servers-in-azure-container-apps/4403550)
- [Репозиторій Azure Container Apps MCP](https://github.com/anthonychu/azure-container-apps-mcp-sample)


## Що далі

- Далі: [Розширені теми сервера](../10-advanced/README.md)

---

<!-- CO-OP TRANSLATOR DISCLAIMER START -->
**Відмова від відповідальності**:
Цей документ було перекладено за допомогою сервісу машинного перекладу [Co-op Translator](https://github.com/Azure/co-op-translator). Хоча ми прагнемо до точності, будь ласка, майте на увазі, що автоматичні переклади можуть містити помилки або неточності. Оригінальний документ рідною мовою слід вважати авторитетним джерелом. Для критично важливої інформації рекомендується звертатися до професійного людського перекладу. Ми не несемо відповідальності за будь-які непорозуміння або неправильні тлумачення, що виникли внаслідок використання цього перекладу.
<!-- CO-OP TRANSLATOR DISCLAIMER END -->